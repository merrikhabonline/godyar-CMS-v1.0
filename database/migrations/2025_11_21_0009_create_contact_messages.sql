CREATE TABLE IF NOT EXISTS contact_messages ( id INT NOT NULL AUTO_INCREMENT, name VARCHAR(190) NOT NULL, email VARCHAR(190) NOT NULL, subject VARCHAR(255) NULL, message TEXT NOT NULL, status VARCHAR(20) NOT NULL DEFAULT 'new', is_read BOOLEAN NOT NULL DEFAULT false, replied_at DATETIME NULL, replied_by INT NULL, created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (id), KEY idx_status (status), KEY idx_created_at (created_at) ); ALTER TABLE contact_messages ADD COLUMN IF NOT EXISTS status VARCHAR(20) NOT NULL DEFAULT 'new', ADD COLUMN IF NOT EXISTS is_read BOOLEAN NOT NULL DEFAULT false, ADD COLUMN IF NOT EXISTS replied_at DATETIME NULL, ADD COLUMN IF NOT EXISTS replied_by INT NULL, ADD COLUMN IF NOT EXISTS updated_at TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;
